<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI Architecture & Vacant Space Dashboard</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f4f4;
  text-align: center;
}
.container {
  max-width: 800px;
  margin: auto;
  background: white;
  padding: 20px;
}
img {
  max-width: 100%;
  margin-top: 10px;
}
button {
  padding: 10px 20px;
  margin-top: 15px;
  cursor: pointer;
}
#output {
  margin-top: 20px;
  white-space: pre-wrap;
}
</style>
</head>

<body>
<div class="container">
  <h2>AI Architecture & Vacant Space Analyzer</h2>

  <input type="file" id="imageInput" accept="image/*">
  <br>

  <img id="preview" style="display:none;">

  <br>
  <button onclick="analyzeImage()">Analyze</button>

  <div id="output">Waiting for image...</div>
</div>

<script>
const API_KEY = "PASTE_YOUR_GEMINI_API_KEY_HERE";

async function analyzeImage() {
  const input = document.getElementById("imageInput");
  const output = document.getElementById("output");
  const preview = document.getElementById("preview");

  if (!input.files.length) {
    output.textContent = "❌ Please select an image.";
    return;
  }

  const file = input.files[0];
  preview.src = URL.createObjectURL(file);
  preview.style.display = "block";

  output.textContent = "⏳ AI is analyzing the architecture and vacant space...";

  const reader = new FileReader();
  reader.onload = async () => {
    const base64 = reader.result.split(",")[1];

    try {
      const response = await fetch(
        "https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-pro:generateContent?key=" + API_KEY,
        {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            contents: [{
              parts: [
                { text: "Analyze architecture and suggest improvements for vacant space." },
                {
                  inlineData: {
                    mimeType: file.type,
                    data: base64
                  }
                }
              ]
            }]
          })
        }
      );

      const result = await response.json();
      console.log(result);

      if (!result.candidates) {
        output.textContent = "❌ AI did not return a response.";
        return;
      }

      output.textContent =
        result.candidates[0].content.parts[0].text;

    } catch (error) {
      output.textContent = "❌ Error: " + error.message;
    }
  };

  reader.readAsDataURL(file);
}
</script>
</body>
</html>
